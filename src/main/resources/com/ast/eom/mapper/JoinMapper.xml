<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ast.eom.dao.JoinDao">
	
	<insert id="insert" parameterType="Member">
    insert into
    member(mem_type_no,reg_date,gender,dob,id,email,name,pwd,addr_city,addr_sub,tel,profile_photo,activation_key)
    values
    (#{memberTypeNo},now(),#{gender},#{dateOfBirth},#{id},#{email},#{name},password(#{password}),#{addressCity},#{addressSuburb},#{tel},#{profilePhoto},#{activationKey})
  </insert>
  
  <insert id="teacherInsert" parameterType="Map">
    insert into
    teacher(acc_no,bank_name,lesson_certi,tch_intro)
    values
    (#{accountNo},#{bankName},#{lessonCertificate},#{teacherIntro})
  </insert>
  
  <insert id="parentsInsert" parameterType="Map">
    insert into
    parents(acc_no,bank_name,lesson_certi,tch_intro)
    values
    (#{accountNo},#{bankName},#{lessonCertificate},#{teacherIntro})
  </insert>
  
  <insert id="studentInsert" parameterType="Map">
    insert into
    student(acc_no,bank_name,lesson_certi,tch_intro)
    values
    (#{accountNo},#{bankName},#{lessonCertificate},#{teacherIntro})
  </insert>
  
<!--   아이디 중복 -->
	<select id="checkOverId" parameterType="String" resultType="int">
		select count(*) from member where id=#{id}
	</select>
	
<!-- 	이메일 중복 -->
	<select id="checkOverEmail" parameterType="String" resultType="int">
    select count(*) from member where email=#{email}
  </select>
  
<!--   전화번호 중복 -->
  <select id="checkOverTel" parameterType="String" resultType="int">
    select count(*) from member where tel=#{tel}
  </select>
  
<!--   계좌번호 중복 -->
  <select id="checkOverAccountNo" parameterType="String" resultType="int">
    select count(*) from teacher where acc_no=#{accountno}
  </select>
  
  <update id="updateCheck" parameterType="String" >
      UPDATE member SET userEmailChecked = 1 WHERE activation_key = #{activationKey}
  </update>

</mapper>
